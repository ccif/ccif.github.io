---
import { getCollection } from 'astro:content';

const resumeEntries = await getCollection('resume');
const resumeData = resumeEntries[0]?.data;

if (!resumeData) {
  throw new Error('Resume data not found');
}

const { name, contact, experience, projects, skills, education } = resumeData;
---

<div class="resume">
  <!-- Experience -->
  <section class="section">
    <h2 class="section-title">Experience</h2>
    {experience.map((exp: any) => (
      <div class="entry">
        <div class="entry-header">
          <div class="entry-title-company">
            <span class="entry-title">{exp.title}</span><span class="entry-company">, {exp.company}</span>
          </div>
          <span class="entry-dates">{exp.dates}</span>
        </div>
        {exp.technologies && <div class="entry-technologies">{exp.technologies}</div>}
        <ul class="entry-bullets">
          {exp.bullets.map((bullet: string) => (
            <li>{bullet}</li>
          ))}
        </ul>
      </div>
    ))}
  </section>

  <!-- Projects -->
  <section class="section">
    <h2 class="section-title">Projects</h2>
    {projects.map((project: any) => (
      <div class="entry">
        <div class="entry-header">
          <h3 class="entry-title">{project.title}</h3>
          {project.url && <span class="entry-url">{project.url}</span>}
        </div>
        {project.technologies && <div class="entry-technologies">{project.technologies}</div>}
        <ul class="entry-bullets">
          {project.bullets.map((bullet: string) => (
            <li>{bullet}</li>
          ))}
        </ul>
      </div>
    ))}
  </section>

  <!-- Skills -->
  <section class="section">
    <h2 class="section-title">Skills</h2>
    <ul class="skills-list">
      {skills.map((skill: any) => (
        <li class="skill-item">
          <span class="skill-category">{skill.category}:</span>
          <span class="skill-items">{skill.items}</span>
        </li>
      ))}
    </ul>
  </section>

  <!-- Education -->
  <section class="section">
    <h2 class="section-title">Education</h2>
    {education.map((edu: any) => (
      <div class="entry">
        <div class="entry-header">
          <h3 class="entry-title">{edu.school}</h3>
          <span class="entry-dates">{edu.date}</span>
        </div>
        <div class="entry-degree">{edu.degree}</div>
      </div>
    ))}
  </section>
</div>
